<!DOCTYPE html>
<html>
<head>
    <title>Currency Converter</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        input, select { margin: 5px 0; padding: 5px; }
        button { padding: 5px 10px; margin-top: 10px; }
        #result { margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Currency Converter</h1>

    <label>From:</label>
    <select id="fromCurrency"></select><br>

    <label>To:</label>
    <select id="toCurrency"></select><br>

    <label>Amount:</label>
    <input type="number" id="amount" value="1"><br>

    <button onclick="convertCurrency()">Convert</button>

    <div id="result"></div>

    <script>
        async function loadCurrencies() {
            const res = await fetch('/currencies');
            const data = await res.json();
            const from = document.getElementById('fromCurrency');
            const to = document.getElementById('toCurrency');
            data.currencies.forEach(c => {
                from.innerHTML += `<option value="${c}">${c}</option>`;
                to.innerHTML += `<option value="${c}">${c}</option>`;
            });
        }

        async function convertCurrency() {
            const from = document.getElementById('fromCurrency').value;
            const to = document.getElementById('toCurrency').value;
            const amount = document.getElementById('amount').value;

            const res = await fetch(`/convert?from=${from}&to=${to}&amount=${amount}`);
            const data = await res.json();
            
            if(data.error){
                document.getElementById('result').innerText = `Error: ${data.error}`;
            } else {
                document.getElementById('result').innerText = 
                    `${data.amount} ${data.from} = ${data.converted} ${data.to}`;
            }
        }

        loadCurrencies();
    </script>
</body>
</html>
